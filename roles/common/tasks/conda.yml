
---

- name: Check if conda is installed
  stat:
    path: /home/{{ user }}/miniconda3/bin/conda
  register: conda_existence_check

- name: Download miniconda installation script
  get_url:
    url: https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh
    dest: /home/{{ user }}/SW/Miniconda3-latest-Linux-x86_64.sh
    mode: '0744'
  when: conda_existence_check is failed

- name: Install miniconda
  command: sh /home/{{ user }}/SW/Miniconda3-latest-Linux-x86_64.sh -b -p /home/{{ user }}/miniconda3
  when: conda_existence_check is failed
